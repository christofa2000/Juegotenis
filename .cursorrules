# .cursorrules
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ§  Cursor Development Rules â€” Christian Oscar Papa (2025)
# Stack: Next.js 16 â€¢ TypeScript â€¢ Tailwind v4 â€¢ Zustand â€¢ React Query
# Objetivo: Mantener un nivel de excelencia en cÃ³digo, UX, y arquitectura.
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## ğŸ§­ FilosofÃ­a General
- Priorizar cÃ³digo limpio, mantenible y escalable.
- Escribir componentes con intenciÃ³n: menos lÃ³gica, mÃ¡s composiciÃ³n.
- Adoptar el principio **â€œCode as Craftâ€** â€” cada archivo debe ser legible como una historia.
- Usar **AI como copiloto**, no como sustituto: toda sugerencia generada por IA debe pasar revisiÃ³n humana.
- Favorecer patrones funcionales y declarativos (no imperativos).
- Aplicar â€œProgressive Enhancementâ€ en todas las vistas pÃºblicas.

---

## ğŸ§© Estructura del Proyecto
- Usar **App Router** con estructura segmentada por propÃ³sito:
app/
(marketing)/
(dashboard)/
api/
lib/
components/
hooks/
stores/
types/
styles/

markdown
Copiar cÃ³digo
- Separar lÃ³gica de UI, estado y datos.
- Crear un archivo `/lib/config/site.ts` con metadatos globales (SEO, branding, links).
- Mantener consistencia en imports: siempre absolutos (`@/components/...`).

---

## âš›ï¸ Reglas React / Next.js
- Usar **Server Components** por defecto.
- Aplicar `use client` solo cuando haya:
- Interactividad UI (onClick, inputs, animaciones)
- Estado local o global
- LibrerÃ­as client-side
- Usar **metadata dinÃ¡mica** (`generateMetadata`) para SEO inteligente.
- Usar **streaming + Suspense boundaries** para optimizar carga inicial.
- Implementar **error.js**, **loading.js**, y **not-found.js** por ruta.
- Evitar lÃ³gica en componentes de pÃ¡gina; delegar a hooks o utils.

---

## ğŸ§  Estado y Datos
### Local
- `useState` â†’ estados simples
- `useReducer` â†’ lÃ³gicas complejas
- `useContext` â†’ solo para temas globales pequeÃ±os (Theme, i18n)
### Global
- **Zustand**:
- Crear stores por feature (`useCartStore`, `useAuthStore`, etc.)
- Usar persistencia solo cuando aporte UX
- Evitar `any`; tipar con interfaces claras
- Incluir selectores para rendimiento (`useStore((s) => s.items)`)
- **React Query**:
- Server state â†’ `useQuery`, `useMutation`
- Suspense y prefetch en Server Components
- Manejo de errores con `onError` y UI amigable (toast, alert)

---

## ğŸ§± TypeScript
- `strict: true` obligatorio.
- No usar `any` ni `unknown` sin justificaciÃ³n en comentario.
- Inferir tipos de Zod (`z.infer<typeof schema>`).
- Usar `interface` para estructuras y `type` para combinaciones.
- Implementar tipos generics y mapped types cuando sean Ãºtiles.
- Exportar tipos compartidos desde `/types/`.
- Activar `noImplicitReturns`, `noUnusedLocals`, `exactOptionalPropertyTypes`.

---

## ğŸ¨ UI / Tailwind / DiseÃ±o
- Usar **Tailwind v4** con `@layer tokens` y `@theme`:
- `brand` â†’ #5f8e82 / `brand-600` â†’ #4f786d
- `neutral`, `accent`, `muted`, `surface`
- Definir tokens en `globals.css`:
```css
@layer tokens {
  --brand-500: oklch(70% 0.1 180);
  --neutral-950: oklch(18% 0.02 270);
}
Mantener coherencia cromÃ¡tica y contraste AAA.

Preferir diseÃ±o mobile-first.

Componentes UI:

Basarse en Shadcn UI + Radix primitives

AÃ±adir microinteracciones con Framer Motion

Animaciones â†’ sutiles, con staggerChildren y easeInOut

No usar colores directos en JSX â€” usar tokens Tailwind.

Dark mode con class="dark" y variables CSS (--color-text, --color-bg).

ğŸ§° LÃ³gica / CÃ³digo / Estilo
IndentaciÃ³n: tabs

Strings: 'single quotes'

No usar ; (excepto en casos ambiguos)

MÃ¡x. 100 caracteres por lÃ­nea

Usar === siempre

Prefijos:

Handlers â†’ handleClick, handleSubmit

Booleans â†’ isOpen, hasError

Hooks â†’ useAuth, useForm

Eliminar variables no usadas

Evitar console.log en producciÃ³n (usar debug() o logger propio)

Documentar funciones pÃºblicas con JSDoc

ğŸ”’ Seguridad
Sanitizar entradas con DOMPurify o validaciones Zod.

Usar next/headers y cookies() en Server Components.

Implementar Content Security Policy en middleware.

No exponer tokens en el cliente.

Deshabilitar dangerouslySetInnerHTML sin limpieza.

ğŸŒ InternacionalizaciÃ³n (i18n)
Usar next-intl o next-i18next.

Evitar strings hardcodeadas â€” usar useTranslations().

Archivos messages/es.json, messages/en.json, etc.

AÃ±adir fallback locale.

Usar helpers para formato de moneda y fecha (Intl.NumberFormat, Intl.DateTimeFormat).

ğŸ§ª Testing
Unit: Jest + RTL (Arrangeâ€“Actâ€“Assert)

Integration: React Testing Library con mocks de API

E2E: Playwright (flows crÃ­ticos)

Usar data-testid descriptivos

Testear accesibilidad con axe-core

Evitar snapshot testing salvo UI estÃ¡tica

â™¿ Accesibilidad
Usar etiquetas semÃ¡nticas (<main>, <nav>, <section>)

Roles ARIA solo cuando sea necesario

Focus visible siempre

Contraste mÃ­nimo 4.5:1

Validar con Lighthouse + axe

AÃ±adir atajos de teclado cuando mejore UX

ğŸš€ Performance
Activar React Compiler

Evitar useEffect innecesario (usar RSC o memo)

Usar next/image optimizado y priority en hero

Cargar fuentes locales (next/font/local)

Prefetch inteligente con next/link

Medir CWV con Lighthouse y next build --analyze

ğŸ’¾ Error Handling
Crear error.tsx por segmento

Usar boundaries visuales + feedback claro

Loggear con Sentry o consola de desarrollo

Evitar silencios en errores â†’ siempre informar al usuario

ğŸ“š DocumentaciÃ³n / AI
Mantener /docs/architecture.md con decisiones (ADR)

agents.md define estilo de generaciÃ³n IA

Incluir comentario en cada archivo generado por IA:

ts
Copiar cÃ³digo
// generated with Cursor + agents.md â€” reviewed by Christian Oscar Papa
Usar Markdown con secciones claras, ejemplos y enlaces a doc oficial.

ğŸ§  Commit y Control de Versiones
Commits semÃ¡nticos (conventional commits):

feat:, fix:, chore:, refactor:, test:

Cada PR debe incluir descripciÃ³n y preview (si aplica)

Ignorar report.html, .env.local, .DS_Store

ğŸŒŒ Nivel de Excelencia
Antes de hacer merge:

 Lint sin errores

 Tipado estricto

 Accesibilidad AA/AAA

 Performance >90 (Lighthouse)

 DocumentaciÃ³n mÃ­nima actualizada

 Pruebas crÃ­ticas corriendo

Si no alcanza excelencia, no se mergea.